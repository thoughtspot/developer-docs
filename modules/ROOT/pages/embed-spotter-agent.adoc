= Embed Spotter Agent
:toc: true
:toclevels: 3

:page-title: Embed Spotter Agent
:page-pageid: embed-spotter-agent
:page-description: You can use the SpotterAgentEmbed SDK library to embed Spotter experience in your application.

Spotter Agent is an embeddable AI analyst component from ThoughtSpot that enables you to integrate natural language data search and conversation analytics into your own application. Unlike the standard Spotter embed, which provides a ready-made search bar and interface, Spotter Agent is designed for deeper integration and customization. It allows you to build your own UI or agent experience, route user questions to ThoughtSpot, and receive structured answers and visualizations, allowing full control over the look, feel, and workflow of the embedded analytics experience.

== Before you begin

Before you begin, check the following:

* You have a ThoughtSpot instance with Spotter Agent enabled.
* You have access to the latest version of the Visual Embed SDK or at least v1.33.1.
* Your host application domain is added to ThoughtSpot CSP and CORS allowlists.

== Import the SDK package

Import the `SpotterEmbed` SDK library to your application environment:

**npm**
[source,JavaScript]
----
import {
    SpotterAgentEmbed,
    AuthType,
    init,
    prefetch,
}
from '@thoughtspot/visual-embed-sdk';
----

**ES6**
[source,JavaScript]
----
<script type = 'module'>
    import {
        SpotterAgentEmbed,
        AuthType,
        init,
        prefetch,
    }
from 'https://cdn.jsdelivr.net/npm/@thoughtspot/visual-embed-sdk/dist/index.js';
----

== Initialize the SDK

To initialize the SDK, the following information is required:

* `thoughtSpotHost` +
The hostname of your ThoughtSpot application instance. See xref:faqs.adoc#tsHostName[FAQs] to know how to find the hostname of your application instance.
* `authType` +
Authentication type. ThoughtSpot supports a variety of Authentication types. For testing purposes, you can use `AuthType.None`. For other authentication options, see xref:embed-authentication.adoc[Authentication].

[source,JavaScript]
----
init({
    thoughtSpotHost: 'https://your-thoughtspot-host', // Replace with your ThoughtSpot application URL
    authType: AuthType.None,
});
----

== Create an instance of the SpotterEmbed object

Create an instance of the `SpotterEmbed` object and specify the data source ID. Optionally, you can specify the search query string to generate a chart or table at load time.

[source,JavaScript]
----
const spotterAgentEmbed = new SpotterAgentEmbed(document.getElementById('ts-embed'), {
    frameParams: {
        width: '100%',
        height: '100%',
    },
    worksheetId: '<%=datasourceGUID%>', // ID of the data source object to query data
});
----

== Customization controls for the embed view (Optional)

The embed package for Spotter includes the additional configuration flags to customize the Spotter Agent. Spotter Agent includes only the AI search experience with the Search bar by default. The interface design and styling is controlled by your host app. However, the SDK provides a few controls to customize search experience and app interactions.

For more information, see the following pages:

* xref:SpotterAgentEmbedViewConfig.adoc[SpotterAgentEmbedConfig] for embed view customization properties
* see xref:Action.adoc[Action customization framework] to show or hide actions on the Answers generated from the query +
* Event handlers for xref:HostEvent.adoc[host] and xref:EmbedEvent.adoc[embed] app interaction
* xref:css-customization.adoc[Style customization framework] to customize style, text strings, and icons in the embedded view.

== Render the embedded object

[source,JavaScript]
----
spotterAgentEmbed.render();
----

== Code sample

[source,JavaScript]
----
import { SpotterAgentEmbed, AuthType, init } from '@thoughtspot/visual-embed-sdk';

// Initialize the SDK
init({
    thoughtSpotHost: 'https://your-thoughtspot-host', // Replace with your ThoughtSpot application URL
    authType: AuthType.None, // Use the appropriate AuthType for your setup
});

// Create and render the SpotterAgentEmbed
const spotterAgentEmbed = new SpotterAgentEmbed('#ts-spotter-agent', {
  frameParams: {
    height: '600px',
    width: '100%',
  },
   worksheetId: "your-worksheet-id", // ID of the data source object (Model) to query data
  // Optionally, you can set other configuration options here
  // Add event listeners
});

spotterAgentEmbed.render();
----

== Test your embed

* Load the embedded object. +
If the embedding is successful, you'll see the Spotter search panel at the bottom of the page.
+
[.widthAuto]
[.bordered]
image::./images/spotterAgentEmbed.png[Spotter Agent embed]

* Type your query, click the *Send* button to prompt Spotter and generate a response.
+
[.widthAuto]
[.bordered]
image::./images/spotterAgentEmbedQuery.png[Spotter Agent embed query]

== Additional resources
* link:https://developers.thoughtspot.com/docs/Class_SpotterAgentEmbed[SpotterAgentEmbed classes and methods]
* xref:spotter-in-custom-chatbot.adoc[Integrate Spotter in your custom chatbot tutorial]
* link:https://github.com/thoughtspot/developer-examples/tree/main/visual-embed/spotter/spotter-agent-embed[Developer examples, window=_blank]
* link:https://codesandbox.io/p/sandbox/youthful-paper-km4zh6?file=%2Fsrc%2FApp.js%3A51%2C47-51%2C62[Code sandbox, window=_blank]
