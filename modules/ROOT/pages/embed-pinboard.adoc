= Embed a Liveboard
:toc: true
:toclevels: 2

:page-title: Embed Liveboards
:page-pageid: embed-liveboard
:page-description: You can use the LiveboardEmbed SDK library to embed a ThoughtSpot Liveboard in your app and use it for live insights

This page explains how to embed a ThoughtSpot Liveboard in your Web page, portal, or application.

A ThoughtSpot Liveboard is an interactive dashboard that presents a collection of visualizations pinned by a user.

== Import the LiveboardEmbed package

Import the `LiveboardEmbed` SDK library to your application environment:

**npm**
[source,JavaScript]
----
import {
    LiveboardEmbed,
    AuthType,
    init,
    prefetch,
    EmbedEvent
}
from '@thoughtspot/visual-embed-sdk';
----

**ES6**
[source,JavaScript]
----
<script type = 'module'>
    import {
        LiveboardEmbed,
        AuthType,
        init,
        prefetch
    }
from 'https://cdn.jsdelivr.net/npm/@thoughtspot/visual-embed-sdk/dist/tsembed.es.js';
----

== Initialize the SDK

xref:getting-started.adoc#initSdk[Initialize the SDK] and define authentication attributes.

== Create an instance of the LiveboardEmbed class

[source,JavaScript]
----
const liveboardEmbed = new LiveboardEmbed(document.getElementById('ts-embed'), {
    frameParams: {
        width: '100%',
        height: '100%',
    },
    liveboardId: '<%=liveboardGUID%>',
    visibleVizs: [],
    runtimeFilters: [{
    columnName: '<column-name>',
    operator: <RuntimeFilterOp>
    values: ['value']
   }],
});
----
////
[source,JavaScript]
----
const liveboardEmbed = new LiveboardEmbed(document.getElementById('ts-embed'), {
    frameParams: {
        width: '100%',
        height: '100%',
    },
    additionalFlags: {
    <key>: <value>
    },
    disabledActions: [],
    fullHeight: true,
    disabledActionReason: '<reason for disabling>',
    hiddenActions: [],
    liveboardId: '<%=liveboardGUID%>',
    enableVizTransformations: true,
    preventLiveboardFilterRemoval: true,
    runtimeFilters: [],
});
----


frameParams::
Sets the `width` and `height` dimensions to render the Liveboard object. You can set the `width` and `height` attribute values in pixels or as a percentage.

include::{path}/additional-flags.adoc[]

----
https://{ThoughtSpot-Host}/?embedApp=true&isLiveboardEmbed=true&enableFeatureA=true#/embed/viz/d084c256-e284-4fc4-b80c-111cb606449a
----


fullHeight __Optional__::
_Boolean_. Dynamically resizes the embedded Liveboard frame according to the height of the Liveboard.

+
If the embedded Liveboard does not fit vertically within your application page, a second scroll bar may appear. When `fullHeight` is set to `true`, the embedded Liveboard frame is automatically adjusted according to the height of the Liveboard, and the second scroll bar does not appear.

defaultHeight::
_Integer_. Minimum height to set for embedded objects on a Liveboard page and the corresponding visualization pages that a user can navigate to from the Liveboard page. The default value is `500` pixels.

+
++++
<a href="{{previewPrefix}}/playground/liveboard?fullHeight=true" id="preview-in-playground" target="_blank">Try it out</a>
++++


visibleActions __Optional__::
_Array of strings_. Displays the specified actions on the *Liveboards* page. These actions can appear as buttons, or as menu actions in **More** image:./images/icon-more-10px.png[the more options menu] or the contextual menu. You can use this attribute to show a small subset of actions from the list of available actions.

+
----
visibleActions: [Action.DownloadAsPDF,Action.DownloadAsCSV,Action.Save,Action.Present]
----
+
++++
<a href="{{previewPrefix}}/playground/liveboard?modifyActions=true" id="preview-in-playground" target="_blank">Try it out</a>
++++

+
[NOTE]
====
Use either `visibleActions` or `hiddenActions` to show or hide the actions in the embedded UI. For more information, see xref:embed-actions.adoc[Show or hide UI actions].
====

hiddenActions __Optional__::
_Array of strings_. Hides specified actions from the list of available actions on the embedded *Liveboards* page. You can use this attribute to remove the actions that are not relevant to your application context. Do not use this attribute if `visibleActions` are defined.

+
For example, to hide *Add filters* action from the *More* menu image:./images/icon-more-10px.png[the more options menu], specify `Action.AddFilter` in the `hiddenActions` attribute.

+
----
hiddenActions: [Action.AddFilter]
----
+
++++
<a href="{{previewPrefix}}/playground/liveboard?modifyActions=true" id="preview-in-playground" target="_blank">Try it out</a>
++++


disabledActions __Optional__::
_Array of strings_. Disables the specified actions. You can use this attribute to restrict user access to certain features.
+
For example, to disable the *Present* action from the *More* menu image:./images/icon-more-10px.png[the more options menu], specify `Action.Present` in the `disabledActions` attribute.

+
----
disabledActions: [Action.Present]
----
+
++++
<a href="{{previewPrefix}}/playground/liveboard?modifyActions=true" id="preview-in-playground" target="_blank">Try it out</a>
++++

include::{path}/custom-action-note.adoc[]

disabledActionReason __Optional__::
_String_. The text to show for disabled actions. The text string specified in `disabledActionReason` shows as a tooltip when a user hovers over a disabled action in the embedded UI. For example, if you have disabled the `Download` action and you intend to enable this action for only authorized users, you can specify `disabledActionReason` as `Contact your administrator to enable this feature`.

liveboardId::
_String_. The GUID of the Liveboard.

liveboardV2 __Optional__::
__Boolean__. Use this parameter to turn on or off the xref:embed-pinboard.adoc#lbv2[new Liveboard experience]. By default, the `liveboardV2` attribute is set to `false`.

enableVizTransformations __Optional__::
_Boolean_. When set to `true`, it displays the contextual menu for visualizations. The contextual menu allows users to drill down a visualization, apply filters, and view detailed insights.


[#filter-removal]
preventLiveboardFilterRemoval __Optional__::
_Boolean_. When set to true, it disables the filter removal action and thus prevents users from removing the filters applied to a Liveboard visualization.

visibleVizs __Optional__::
_Array of strings_. Allows adding GUIDs of the visualizations, which you want to show by default on an embedded Liveboard when it renders for the first time.
+
You can show or hide the visualizations by triggering the `SetVisibleVizs` event.

runtimeFilters [small]_optional_::
Runtime filters to apply when the pinboard page loads.
Runtime filters provide the ability to filter data at the time of retrieval. Runtime filters allow you to apply a filter to a visualization in a pinboard by passing filter specifications as URL query parameters.
+
Runtime filters do not appear to the user in the Liveboard UI. They do not adjust the values of visible Liveboard filters, but act as an additional set of filters â€” both runtime filters and UI filters will be applied within the queries.
+
For example, to sort values equal to `red` in the `Color` column for a visualization in a Liveboard, you can pass the runtime filter in the URL query parameters as shown here:

+
[source,JavaScript]
----
runtimeFilters: [{
    columnName: 'Region',
    operator: RuntimeFilterOp.IN,
    values: ['Midwest', 'East', 'West']
}]
----

columnName;;
__String__. Name of the column to filter by.

operator;;
__String__. The runtime filter operator. For more information about the runtime filter operators, see xref:runtime-filters.adoc#runtimeFilterOp[Runtime filters].

values;;
__String, Integer, or Boolean__. The list of operands. Operators like EQ, LE accept a single operand, whereas other operators like BW and IN accept multiple operands.

+
++++
<a href="{{previewPrefix}}/playground/liveboard?runtimeFilters=true" id="preview-in-playground" target="_blank">Try it out</a>
++++

For more information about the supported data types and how to use runtime filters, see xref:runtime-filters.adoc[Runtime filters].
////

In the above example, the `fullHeight` attribute is set to `true` to dynamically resize the embedded object container according to the height of the pages which support fullHeight mode.

[NOTE]
====
Using fullHeight loads all visualizations on the liveboard simultaneously, which results in multiple warehouse queries and potentially a longer wait for the topmost visualizations to display on the screen.

Setting `fullHeight` to `false` fetches visualizations incrementally as users scroll the page to view the charts and tables.
====

For more information about the Liveboard embed object, classes, methods, interface properties, and enumeration members, see the following pages:

* xref:LiveboardEmbed.adoc[LiveboardEmbed]
* xref:LiveboardViewConfig.adoc[LiveboardViewConfig]
* xref:Action.adoc[Actions]

== Register, handle, and trigger events

Register event listeners.

[source,JavaScript]
----
liveboardEmbed.on(EmbedEvent.init, showLoader)
liveboardEmbed.on(EmbedEvent.load, hideLoader)
----

For more information about events, see the following pages:

* xref:HostEvent.adoc[HostEvent]
* xref:EmbedEvent.adoc[EmbedEvent]
* xref:embed-events.adoc[Events and app integration]

== Render the embedded Liveboard

Render the embedded Liveboard.

[source,JavaScript]
----
liveboardEmbed.render();
----

== Verify the embedded object
. Load the embedded object in your app. If the embedding is successful, you will see a Liveboard page with visualizations.
+
[.bordered]
image::./images/embed-lb.png[Liveboard embed]

. Explore the charts and tables, and verify if objects render and show the desired data.

[#lbv2]
== Liveboard experience modes

ThoughtSpot Liveboards support the following modes:

* New experience mode (Default)
* Classic experience mode
+
The new Liveboard experience can be turned off or on using the `liveboardV2` parameter in the `LiveboardEmbed` SDK. By default, the new Liveboard experience is enabled in the SDK and this setting takes precedence over the setting applied at the cluster level in the `Admin` tab.

The new Liveboard experience provides an improved interface with several new features and enhancements. The following figure shows the menu actions available on a Liveboard page in each mode: +
[.bordered]
[.widthAuto]
image:./images/liveboard-exp-diff.png[Liveboard experience comparison]


Note the following enhancements in the new New Experience mode:

* Liveboard edit +
To edit a Liveboard in the new experience mode, click the *Edit* button on the Liveboard page. For example, to delete a visualization on a Liveboard, the user must click *Edit*, and then navigate to the *Delete* option on a visualization.

* Filter application in the new experience mode +
To apply filters, the application users must switch to the edit mode. Only users with edit access to the Liveboard can apply filters. When a user creates a copy of a Liveboard, the filters applied on its visualizations are also copied. For more information about Liveboard filters, see link:https://docs.thoughtspot.com/cloud/latest/liveboard-filters[Liveboard filter configuration options, window=_blank].
* Actions +
The following actions are deprecated in the new experience mode:
** The *Copy embed link* and *Copy link* menu actions in the More image:./images/icon-more-10px.png[the more options menu] menu of a Liveboard
** The edit title icon on visualization tiles
** The *Share* button on visualizations

=== Liveboard tabs

The new Liveboard experience allows you to organize your visualizations into tabs. Liveboard tabs allow you to logically group visualization into specific categories and allow users to access them easily.

To create, edit, or move visualizations to a tab, you require edit access to a Liveboard.

* To add a tab, click *Edit* and then click *Add tab* on the Liveboard page.
* To add a visualization to a tab on a Liveboard, click *Move to tab* from the More image:./images/icon-more-10px.png[the more options menu] menu.
+
You can also pin a visualization to a Liveboard tab using the **Pin** action on the Answer page.

==== Set a tab as an active tab

By default, the first tab created on a Liveboard is set as the home tab. You can set any tab as an active tab using the `activeTabId` property in the Visual Embed SDK as shown in the example here:

[source,JavaScript]
----
const liveboardEmbed = new LiveboardEmbed(document.getElementById('ts-embed'), {
    frameParams: {
        width: '100%',
        height: '100%',
    },
    liveboardV2: true,
    liveboardId: "d7a5a08e-a1f7-4850-aeb7-0764692855b8",
    activeTabId: "05406350-44ce-488e-abc5-5e8cdd65cf3c",
});
----

[NOTE]
====
The `activeTabId` property is available only in the `LiveboardEmbed` package and is not supported in the full application embed mode.
====

[#noteTiles]
=== Note tiles
You can add a link:https://docs.thoughtspot.com/cloud/latest/liveboard-notes[Liveboard Note tile, window=_blank] with custom text, images, and links on an embedded Liveboard.

* Only users with edit access to a Liveboard can add a Note tile.
* Users require `Can upload data` privilege can upload an image to the note tile.
* If you are adding links and images from an external site, or embedding multimedia or web page in an iFrame, make sure the URLs are added to CORS and CSP allowlists. For more information, see xref:security-settings.adoc[Security settings].

=== Commenting on Liveboards
Users on a non-embedded ThoughtSpot application instance can add comments, reply to comments, or subscribe to comment threads on a Liveboard. However, if the Liveboard is embedded in another application, the comment icon will not be visible to the embedded application users regardless of their access privileges.

== Additional resources

* For code examples, see xref:code-samples.adoc[Code samples].
* For more information about the SDK APIs and attributes, see xref:VisualEmbedSdk.adoc[Visual Embed SDK Reference Guide].
